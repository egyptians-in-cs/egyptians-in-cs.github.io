<!-- Hero Section with Glassmorphism & Particles -->
<section class="mb-8 animate-fade-in">
  <div class="hero-gradient rounded-2xl p-6 md:p-10 text-white shadow-elevated overflow-hidden">
    <!-- Floating Particles Background -->
    <div class="particles-bg">
      <div class="particle w-2 h-2 bg-gold-400" style="top: 10%; left: 20%; animation-delay: 0s;"></div>
      <div class="particle w-3 h-3 bg-teal-400" style="top: 60%; left: 80%; animation-delay: 2s;"></div>
      <div class="particle w-2 h-2 bg-gold-400" style="top: 80%; left: 10%; animation-delay: 4s;"></div>
      <div class="particle w-4 h-4 bg-teal-400" style="top: 30%; left: 70%; animation-delay: 1s;"></div>
      <div class="particle w-2 h-2 bg-gold-400" style="top: 50%; left: 40%; animation-delay: 3s;"></div>
    </div>

    <div class="relative z-10">
      <h1 class="text-3xl md:text-4xl lg:text-5xl font-serif font-bold mb-4 gradient-text-hero">
        Egyptians in Computer Science
      </h1>
      <p class="text-navy-200 leading-relaxed mb-8 max-w-3xl text-lg">
        A platform celebrating the achievements of prominent Egyptian researchers in
        Computer Science and related fields. To be featured, researchers must have an
        <span class="text-gold-400 font-semibold glow-gold">h-index of 5 or higher</span>.
        <a href="https://docs.google.com/forms/d/e/1FAIpQLSdLaYBQyOzI5gnlGzwOki3b1TJtFjLUeHUKxkGtXQDhHdSreg/viewform"
           target="_blank"
           class="text-gold-400 hover:text-gold-300 underline decoration-2 underline-offset-2 transition-colors">
          Nominate someone â†’
        </a>
      </p>

      <!-- Glassmorphism Stats Cards -->
      <div class="flex flex-wrap gap-4 mb-8">
        <div class="stats-card">
          <div class="stats-icon">
            <i class="fa-solid fa-users text-gold-400 text-2xl"></i>
          </div>
          <div>
            <div class="stats-number counter-animate">{{ profiles.length }}</div>
            <div class="text-sm text-navy-200 font-medium">Total Researchers</div>
          </div>
        </div>
        <div class="stats-card">
          <div class="stats-icon !bg-gradient-to-br !from-teal-400/30 !to-teal-500/20">
            <i class="fa-solid fa-eye text-teal-400 text-2xl"></i>
          </div>
          <div>
            <div class="text-3xl font-bold text-teal-400 counter-animate">{{ researchers.length }}</div>
            <div class="text-sm text-navy-200 font-medium">Currently Showing</div>
          </div>
        </div>
      </div>

      <!-- Enhanced Action Buttons -->
      <div class="flex flex-wrap gap-4 pt-6 border-t border-white/10">
        <a href="https://docs.google.com/forms/d/e/1FAIpQLSdLaYBQyOzI5gnlGzwOki3b1TJtFjLUeHUKxkGtXQDhHdSreg/viewform"
           target="_blank"
           class="btn-secondary glow-gold">
          <i class="fa fa-pen mr-2"></i>
          Nominate Someone
        </a>
        <a href="https://medium.com/@bkhmsi/egyptians-in-ai-research-1ff64c78cc5b"
           target="_blank"
           class="btn-ghost !text-white !border-2 !border-white/30 hover:!bg-white/10">
          <i class="fa-brands fa-medium mr-2"></i>
          Read the Story
        </a>
      </div>
    </div>
  </div>
</section>

<!-- Two Column Layout -->
<div class="lg:grid lg:grid-cols-12 lg:gap-8">

  <!-- Sidebar -->
  <aside class="lg:col-span-3 mb-8 lg:mb-0">
    <div class="lg:sticky lg:top-24 space-y-4">

      <!-- Search Box with Autocomplete -->
      <div class="sidebar-panel p-4 search-container animate-on-scroll stagger-1 relative z-40">
        <label class="block text-sm font-semibold text-navy-900 dark:text-navy-100 mb-2">
          <i class="fa fa-search text-navy-500 dark:text-navy-400 mr-2"></i>
          Search Researchers
        </label>
        <div class="relative">
          <input
            type="text"
            [value]="searchQuery"
            (input)="onSearchInput($event)"
            (focus)="showAutocomplete = autocompleteResults.length > 0"
            placeholder="Search by name..."
            class="input-field pr-10"
            aria-label="Search researchers"
            role="combobox"
            [attr.aria-expanded]="showAutocomplete"
          >
          <i class="fa fa-search absolute right-4 top-1/2 -translate-y-1/2 text-navy-400"></i>

          <!-- Autocomplete Dropdown -->
          <div *ngIf="showAutocomplete"
               class="absolute top-full left-0 right-0 mt-1 bg-white dark:bg-navy-800
                      rounded-lg shadow-elevated border border-navy-100 dark:border-navy-700
                      z-[100] overflow-hidden max-h-80 overflow-y-auto">
            <button
              *ngFor="let result of autocompleteResults"
              (click)="selectAutocomplete(result)"
              class="w-full flex items-center gap-3 px-4 py-3 hover:bg-navy-50
                     dark:hover:bg-navy-700 transition-colors text-left"
              role="option">
              <!-- Photo or Initials -->
              <div class="w-10 h-10 rounded-full overflow-hidden flex-shrink-0">
                <img *ngIf="result.photo"
                     [src]="result.photo"
                     [alt]="result.name"
                     class="w-full h-full object-cover"
                     (error)="result.photo = ''">
                <div *ngIf="!result.photo"
                     [class]="getInitialsColor(result.name)"
                     class="w-full h-full flex items-center justify-center text-white font-semibold text-sm">
                  {{ getInitials(result.name) }}
                </div>
              </div>
              <div class="flex-1 min-w-0">
                <div class="font-medium text-navy-900 dark:text-white truncate">{{ result.name }}</div>
                <div class="text-xs text-navy-500 dark:text-navy-400 truncate">{{ result.affiliation }}</div>
              </div>
            </button>
          </div>
        </div>
      </div>

      <!-- Active Filters Tags -->
      <div *ngIf="activeFilters.length > 0"
           class="sidebar-panel p-4 animate-on-scroll stagger-2">
        <div class="flex items-center justify-between mb-2">
          <span class="text-sm font-semibold text-navy-900 dark:text-navy-100">
            <i class="fas fa-filter text-navy-500 mr-2"></i>
            Active Filters
          </span>
          <button
            (click)="clearAllFilters()"
            class="text-xs text-red-500 hover:text-red-600 transition-colors">
            Clear All
          </button>
        </div>
        <div class="flex flex-wrap gap-2">
          <span
            *ngFor="let filter of activeFilters"
            class="filter-tag">
            {{ filter.label }}
            <i (click)="removeFilter(filter)"
               class="fas fa-times filter-tag-remove"></i>
          </span>
        </div>
      </div>

      <!-- Sort Buttons -->
      <div class="sidebar-panel p-4 animate-on-scroll stagger-2">
        <h3 class="text-sm font-semibold text-navy-900 dark:text-navy-100 mb-3">
          <i class="fa fa-sort text-navy-500 dark:text-navy-400 mr-2"></i>
          Sort By
        </h3>
        <div class="grid grid-cols-2 gap-2">
          <button
            (click)="sortAZ()"
            class="flex items-center justify-center gap-2 px-3 py-2
                   bg-navy-50 hover:bg-navy-100 text-navy-700
                   dark:bg-navy-700 dark:hover:bg-navy-600 dark:text-navy-200
                   rounded-lg text-sm font-medium transition-colors">
            <i class="fas fa-sort-alpha-down"></i>
            A-Z
          </button>
          <button
            (click)="sortHIndex()"
            class="flex items-center justify-center gap-2 px-3 py-2
                   bg-emerald-50 hover:bg-emerald-100 text-emerald-700
                   dark:bg-emerald-900/30 dark:hover:bg-emerald-900/50 dark:text-emerald-400
                   rounded-lg text-sm font-medium transition-colors">
            <i class="fa-solid fa-arrow-down-9-1"></i>
            h-Index
          </button>
          <button
            (click)="sortCitations()"
            class="flex items-center justify-center gap-2 px-3 py-2
                   bg-amber-50 hover:bg-amber-100 text-amber-700
                   dark:bg-amber-900/30 dark:hover:bg-amber-900/50 dark:text-amber-400
                   rounded-lg text-sm font-medium transition-colors">
            <i class="fa-solid fa-arrow-down-9-1"></i>
            Citations
          </button>
          <button
            (click)="sortShuffle()"
            class="flex items-center justify-center gap-2 px-3 py-2
                   bg-rose-50 hover:bg-rose-100 text-rose-700
                   dark:bg-rose-900/30 dark:hover:bg-rose-900/50 dark:text-rose-400
                   rounded-lg text-sm font-medium transition-colors">
            <i class="fas fa-shuffle"></i>
            Shuffle
          </button>
        </div>
      </div>

      <!-- View Toggle -->
      <div class="sidebar-panel p-4 animate-on-scroll stagger-3">
        <h3 class="text-sm font-semibold text-navy-900 dark:text-navy-100 mb-3">
          <i class="fa fa-th text-navy-500 dark:text-navy-400 mr-2"></i>
          View Mode
        </h3>
        <div class="flex gap-2">
          <button
            (click)="compactView = false"
            [class]="!compactView ? 'bg-navy-900 text-white dark:bg-gold-400 dark:text-navy-900' : 'bg-navy-50 text-navy-700 dark:bg-navy-700 dark:text-navy-200'"
            class="flex-1 flex items-center justify-center gap-2 px-3 py-2
                   rounded-lg text-sm font-medium transition-colors">
            <i class="fas fa-th-large"></i>
            Cards
          </button>
          <button
            (click)="compactView = true"
            [class]="compactView ? 'bg-navy-900 text-white dark:bg-gold-400 dark:text-navy-900' : 'bg-navy-50 text-navy-700 dark:bg-navy-700 dark:text-navy-200'"
            class="flex-1 flex items-center justify-center gap-2 px-3 py-2
                   rounded-lg text-sm font-medium transition-colors">
            <i class="fas fa-list"></i>
            Compact
          </button>
        </div>
      </div>

      <!-- Active Filter Badge -->
      <div *ngIf="selectedMainTrack !== 'all'"
           class="bg-navy-900 text-white rounded-xl p-4 shadow-card">
        <div class="flex items-center justify-between">
          <div>
            <div class="text-xs text-navy-300 mb-1">Active Filter</div>
            <div class="font-medium text-sm">
              {{ selectedMainTrack }}
              <span *ngIf="selectedSubtrack" class="text-navy-300"> / {{ selectedSubtrack }}</span>
              <span *ngIf="selectedArea" class="text-navy-300"> / {{ selectedArea }}</span>
            </div>
          </div>
          <button
            (click)="clearFilters()"
            class="p-2 hover:bg-navy-800 rounded-lg transition-colors"
            title="Clear filter">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
    </div>
  </aside>

  <!-- Main Content Area -->
  <div class="lg:col-span-9">

    <!-- World Map Section -->
    <section class="mb-6 animate-on-scroll">
      <h2 class="text-2xl font-bold text-navy-900 dark:text-navy-100 flex items-center gap-3 mb-4">
        <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-teal-500 to-teal-600 flex items-center justify-center shadow-glow-teal">
          <i class="fas fa-globe-americas text-white"></i>
        </div>
        <span class="gradient-text">Egyptians Around the World</span>
        <span class="text-sm font-normal text-navy-500 dark:text-navy-400 ml-2">
          ({{ locationCount }} mapped)
        </span>
      </h2>
      <div class="map-enhanced">
        <app-map
          [researchers]="researchersWithLocation"
          [hoveredResearcher]="hoveredResearcher"
          mapId="english-map">
        </app-map>
      </div>
    </section>

    <!-- Research Areas Filter Section -->
    <section class="mb-6 glass-card p-6">
      <!-- Header -->
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-bold text-navy-900 dark:text-navy-100 flex items-center gap-3">
          <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-gold-400 to-gold-500 flex items-center justify-center">
            <i class="fas fa-sitemap text-white"></i>
          </div>
          <span>Filter by Research Area</span>
          <span class="text-sm font-normal text-navy-500 dark:text-navy-400">
            ({{ researchers.length }} researchers)
          </span>
        </h2>
        <div class="flex items-center gap-2">
          <button
            (click)="expandAllTracks()"
            class="px-3 py-1.5 text-sm text-navy-600 hover:bg-navy-100 dark:text-navy-300 dark:hover:bg-navy-700 rounded-lg transition-colors"
            title="Expand All">
            <i class="fas fa-expand mr-1"></i> Expand
          </button>
          <button
            (click)="collapseAllTracks()"
            class="px-3 py-1.5 text-sm text-navy-600 hover:bg-navy-100 dark:text-navy-300 dark:hover:bg-navy-700 rounded-lg transition-colors"
            title="Collapse All">
            <i class="fas fa-compress mr-1"></i> Collapse
          </button>
          <button
            *ngIf="selectedAreas.size > 0"
            (click)="clearAreaSelection()"
            class="px-3 py-1.5 text-sm text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors font-medium">
            <i class="fas fa-times mr-1"></i> Clear ({{ selectedAreas.size }})
          </button>
        </div>
      </div>

      <!-- Selected Areas Chips -->
      <div *ngIf="selectedAreas.size > 0" class="mb-4 flex flex-wrap gap-2">
        <span
          *ngFor="let area of getSelectedAreasArray()"
          class="inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium
                 bg-gold-400 text-navy-900 rounded-full shadow-sm">
          {{ area }}
          <button
            (click)="removeSelectedArea(area); $event.stopPropagation()"
            class="hover:bg-navy-900/20 rounded-full p-0.5 transition-colors">
            <i class="fas fa-times text-xs"></i>
          </button>
        </span>
      </div>

      <!-- All Areas Button -->
      <div class="mb-4">
        <button
          (click)="clearAreaSelection()"
          class="px-4 py-2 rounded-lg transition-all font-medium text-sm"
          [ngClass]="selectedAreas.size === 0
            ? 'bg-teal-500 text-white shadow-md'
            : 'bg-navy-100 text-navy-700 hover:bg-navy-200 dark:bg-navy-700 dark:text-navy-300 dark:hover:bg-navy-600'">
          <i class="fas fa-globe-americas mr-2"></i>
          All Research Areas
          <span class="ml-2 px-2 py-0.5 rounded-full text-xs"
                [ngClass]="selectedAreas.size === 0 ? 'bg-white/20' : 'bg-navy-200 dark:bg-navy-600'">
            {{ profiles.length }}
          </span>
        </button>
      </div>

      <!-- Tracks Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3">
        <div *ngFor="let track of getMainTracks()"
             class="border border-navy-200 dark:border-navy-600 rounded-xl overflow-hidden bg-white/50 dark:bg-navy-800/50">
          <!-- Track Header -->
          <button
            (click)="toggleTrack(track)"
            class="w-full flex items-center gap-2 px-4 py-3 text-left
                   hover:bg-navy-50 dark:hover:bg-navy-700/50 transition-colors">
            <i class="fas text-sm"
               [ngClass]="isTrackExpanded(track) ? 'fa-folder-open text-gold-500' : 'fa-folder text-gold-400'"></i>
            <span class="flex-1 font-medium text-sm text-navy-800 dark:text-navy-200 truncate">{{ track }}</span>
            <span class="text-xs px-2 py-1 rounded-full bg-navy-100 dark:bg-navy-700 text-navy-600 dark:text-navy-300">
              {{ getCount(track) }}
            </span>
            <i class="fas text-xs text-navy-400"
               [ngClass]="isTrackExpanded(track) ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
          </button>

          <!-- Expanded Content -->
          <div *ngIf="isTrackExpanded(track)"
               class="border-t border-navy-200 dark:border-navy-600 max-h-64 overflow-y-auto scrollbar-academic">
            <div *ngFor="let subtrack of getSubtracks(track)" class="border-b border-navy-100 dark:border-navy-700 last:border-b-0">
              <!-- Subtrack Header -->
              <button
                (click)="toggleSubtrack(track, subtrack)"
                class="w-full flex items-center gap-2 px-4 py-2 text-left
                       hover:bg-navy-50 dark:hover:bg-navy-700/50 transition-colors bg-navy-50/50 dark:bg-navy-800/50">
                <i class="fas fa-layer-group text-teal-500 text-xs"></i>
                <span class="flex-1 text-sm text-navy-700 dark:text-navy-300 truncate">{{ subtrack }}</span>
                <span class="text-xs px-1.5 py-0.5 rounded bg-teal-100 dark:bg-teal-500/20 text-teal-600 dark:text-teal-400">
                  {{ getCount(subtrack) }}
                </span>
                <i class="fas text-[10px] text-navy-400"
                   [ngClass]="isSubtrackExpanded(track, subtrack) ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
              </button>

              <!-- Areas -->
              <div *ngIf="isSubtrackExpanded(track, subtrack)" class="px-2 py-2 space-y-1 bg-white dark:bg-navy-900">
                <label
                  *ngFor="let area of getAreas(track, subtrack)"
                  class="flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer transition-all
                         hover:bg-navy-50 dark:hover:bg-navy-700/50"
                  [ngClass]="{
                    'bg-gold-50 dark:bg-gold-400/10 ring-1 ring-gold-400': isAreaSelected(area),
                    'opacity-50 cursor-not-allowed': getCount(area) === 0
                  }">
                  <input
                    type="checkbox"
                    [checked]="isAreaSelected(area)"
                    [disabled]="getCount(area) === 0"
                    (change)="toggleAreaSelection(area)"
                    class="w-4 h-4 rounded border-navy-300 text-gold-500
                           focus:ring-gold-400 focus:ring-2 cursor-pointer
                           dark:border-navy-600 dark:bg-navy-700"
                  />
                  <span class="flex-1 text-sm truncate"
                        [ngClass]="isAreaSelected(area)
                          ? 'text-gold-700 dark:text-gold-400 font-medium'
                          : 'text-navy-600 dark:text-navy-400'">
                    {{ area }}
                  </span>
                  <span *ngIf="getCount(area) > 0"
                        class="text-xs px-1.5 py-0.5 rounded-full"
                        [ngClass]="isAreaSelected(area)
                          ? 'bg-gold-200 text-gold-800 dark:bg-gold-400/20 dark:text-gold-300'
                          : 'bg-navy-100 dark:bg-navy-700 text-navy-500 dark:text-navy-400'">
                    {{ getCount(area) }}
                  </span>
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Divider -->
    <div class="border-t border-navy-200 dark:border-navy-700 my-6"></div>

    <!-- Skeleton Loading -->
    <section *ngIf="isLoading">
      <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6">
        <div *ngFor="let i of [1,2,3,4,5,6]" class="research-card">
          <div class="card-header-gradient p-6">
            <div class="skeleton w-24 h-24 rounded-full mx-auto mb-3"></div>
            <div class="skeleton h-5 w-32 mx-auto mb-2"></div>
            <div class="skeleton h-4 w-24 mx-auto"></div>
          </div>
          <div class="p-4">
            <div class="skeleton h-4 w-full mb-3"></div>
            <div class="skeleton h-16 w-full mb-3"></div>
            <div class="flex gap-1 mb-3">
              <div class="skeleton h-5 w-16"></div>
              <div class="skeleton h-5 w-20"></div>
              <div class="skeleton h-5 w-14"></div>
            </div>
            <div class="flex justify-center gap-2 pt-3">
              <div class="skeleton w-9 h-9 rounded-full"></div>
              <div class="skeleton w-9 h-9 rounded-full"></div>
              <div class="skeleton w-9 h-9 rounded-full"></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Empty State -->
    <section *ngIf="!isLoading && researchers.length === 0" class="animate-fade-in">
      <div class="glass-card p-12 text-center">
        <div class="w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-navy-100 to-navy-200 dark:from-navy-700 dark:to-navy-800 flex items-center justify-center">
          <i class="fas fa-search text-4xl text-navy-400 dark:text-navy-500"></i>
        </div>
        <h3 class="text-2xl font-serif font-bold text-navy-900 dark:text-white mb-3">
          No Researchers Found
        </h3>
        <p class="text-navy-600 dark:text-navy-300 max-w-md mx-auto mb-6">
          We couldn't find any researchers matching your current filters. Try adjusting your search criteria or clearing the filters.
        </p>
        <button
          (click)="clearAllFilters()"
          class="btn-secondary">
          <i class="fas fa-times mr-2"></i>
          Clear All Filters
        </button>
      </div>
    </section>

    <!-- Researcher Cards Grid (Normal View) -->
    <section *ngIf="!isLoading && !compactView && researchers.length > 0">
      <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6">
        <article
          *ngFor="let researcher of researchers; let i = index"
          [id]="researcher.name"
          class="research-card group scroll-offset animate-on-scroll"
          [class.stagger-1]="i % 6 === 0"
          [class.stagger-2]="i % 6 === 1"
          [class.stagger-3]="i % 6 === 2"
          [class.stagger-4]="i % 6 === 3"
          [class.stagger-5]="i % 6 === 4"
          [class.stagger-6]="i % 6 === 5"
          (mouseenter)="onResearcherHover(researcher)"
          (mouseleave)="onResearcherHover(null)"
          tabindex="0">

          <!-- Card Header with Photo -->
          <div class="relative card-header-gradient p-6 text-center">
            <!-- Edit Button -->
            <button
              (click)="editProfile(researcher)"
              class="absolute top-3 right-3 p-2 text-navy-400 hover:text-white
                     opacity-0 group-hover:opacity-100 transition-opacity"
              title="Edit Profile">
              <i class="fa-solid fa-pencil"></i>
            </button>

            <!-- Profile Photo with Fallback -->
            <div class="w-24 h-24 rounded-full mx-auto border-4 border-gold-400 shadow-lg overflow-hidden">
              <img *ngIf="researcher.photo"
                   [src]="researcher.photo"
                   [alt]="researcher.name"
                   class="w-full h-full object-cover"
                   (error)="researcher.photo = ''">
              <div *ngIf="!researcher.photo"
                   [class]="getInitialsColor(researcher.name)"
                   class="w-full h-full flex items-center justify-center text-white font-bold text-2xl">
                {{ getInitials(researcher.name) }}
              </div>
            </div>

            <!-- Name -->
            <h3 class="mt-3 text-lg font-serif font-bold text-white">
              {{ researcher.name }}
            </h3>

            <!-- Position -->
            <p class="text-sm text-navy-300 mt-1">
              {{ researcher.position }}
            </p>
          </div>

          <!-- Card Body -->
          <div class="p-4">
            <!-- Affiliation -->
            <div class="flex items-start gap-2 mb-3">
              <i class="fas fa-university text-navy-400 dark:text-navy-500 mt-0.5 text-sm"></i>
              <span class="text-sm text-navy-600 dark:text-navy-300 line-clamp-2">{{ researcher.affiliation }}</span>
            </div>

            <!-- Metrics -->
            <div *ngIf="researcher.hindex > 0"
                 class="flex gap-4 mb-3 p-3 bg-navy-50 dark:bg-navy-900 rounded-lg">
              <div class="text-center flex-1">
                <div class="text-lg font-bold text-navy-900 dark:text-white">{{ researcher.hindex }}</div>
                <div class="text-xs text-navy-500 dark:text-navy-400">h-index</div>
              </div>
              <div class="w-px bg-navy-200 dark:bg-navy-700"></div>
              <div class="text-center flex-1">
                <div class="text-lg font-bold text-navy-900 dark:text-white">{{ researcher.citedby | number }}</div>
                <div class="text-xs text-navy-500 dark:text-navy-400">Citations</div>
              </div>
            </div>
            <div *ngIf="researcher.hindex === 0" class="mb-3 text-sm text-navy-400 dark:text-navy-500 italic">
              Metrics not available
            </div>

            <!-- Research Interests -->
            <div class="mb-3">
              <h4 class="text-xs font-semibold text-navy-500 dark:text-navy-400 uppercase tracking-wide mb-2">
                Research Interests
              </h4>
              <div class="flex flex-wrap gap-1 max-h-20 overflow-y-auto scrollbar-hide">
                <span
                  *ngFor="let interest of researcher.standardized_interests"
                  class="inline-block px-2 py-0.5 bg-teal-500/10 text-teal-700
                         dark:bg-teal-500/20 dark:text-teal-400 rounded text-xs">
                  {{ interest }}
                </span>
              </div>
            </div>

            <!-- Social Links -->
            <div class="flex items-center justify-center gap-2 pt-3 border-t border-navy-100 dark:border-navy-700">
              <a *ngIf="researcher.website"
                 [href]="researcher.website"
                 target="_blank"
                 class="social-link"
                 title="Website">
                <i class="fas fa-globe"></i>
              </a>
              <a *ngIf="researcher.scholar"
                 [href]="researcher.scholar"
                 target="_blank"
                 class="social-link"
                 title="Google Scholar">
                <i class="fas fa-graduation-cap"></i>
              </a>
              <a *ngIf="researcher.twitter"
                 [href]="researcher.twitter"
                 target="_blank"
                 class="social-link hover:!bg-sky-500"
                 title="Twitter/X">
                <i class="fab fa-twitter"></i>
              </a>
              <a *ngIf="researcher.linkedin"
                 [href]="researcher.linkedin"
                 target="_blank"
                 class="social-link hover:!bg-blue-600"
                 title="LinkedIn">
                <i class="fab fa-linkedin-in"></i>
              </a>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- Compact List View -->
    <section *ngIf="!isLoading && compactView && researchers.length > 0">
      <div class="glass-card overflow-hidden">
        <table class="w-full">
          <thead class="bg-navy-50 dark:bg-navy-900">
            <tr class="text-left text-sm font-semibold text-navy-700 dark:text-navy-200">
              <th class="px-4 py-3">Researcher</th>
              <th class="px-4 py-3 hidden sm:table-cell">Affiliation</th>
              <th class="px-4 py-3 text-center">h-index</th>
              <th class="px-4 py-3 text-center hidden md:table-cell">Citations</th>
              <th class="px-4 py-3 text-center">Links</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-navy-100 dark:divide-navy-700">
            <tr *ngFor="let researcher of researchers"
                class="hover:bg-navy-50 dark:hover:bg-navy-700/50 transition-colors"
                (mouseenter)="onResearcherHover(researcher)"
                (mouseleave)="onResearcherHover(null)">
              <td class="px-4 py-3">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 rounded-full overflow-hidden flex-shrink-0 border-2 border-gold-400">
                    <img *ngIf="researcher.photo"
                         [src]="researcher.photo"
                         [alt]="researcher.name"
                         class="w-full h-full object-cover"
                         (error)="researcher.photo = ''">
                    <div *ngIf="!researcher.photo"
                         [class]="getInitialsColor(researcher.name)"
                         class="w-full h-full flex items-center justify-center text-white font-semibold text-sm">
                      {{ getInitials(researcher.name) }}
                    </div>
                  </div>
                  <div>
                    <div class="font-medium text-navy-900 dark:text-white">{{ researcher.name }}</div>
                    <div class="text-xs text-navy-500 dark:text-navy-400">{{ researcher.position }}</div>
                  </div>
                </div>
              </td>
              <td class="px-4 py-3 text-sm text-navy-600 dark:text-navy-300 hidden sm:table-cell">
                <div class="max-w-xs truncate">{{ researcher.affiliation }}</div>
              </td>
              <td class="px-4 py-3 text-center">
                <span class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-navy-100 dark:bg-navy-700 font-bold text-navy-900 dark:text-white">
                  {{ researcher.hindex }}
                </span>
              </td>
              <td class="px-4 py-3 text-center text-navy-700 dark:text-navy-300 hidden md:table-cell">
                {{ researcher.citedby | number }}
              </td>
              <td class="px-4 py-3">
                <div class="flex items-center justify-center gap-1">
                  <a *ngIf="researcher.scholar"
                     [href]="researcher.scholar"
                     target="_blank"
                     class="p-2 text-navy-400 hover:text-navy-900 dark:hover:text-white transition-colors"
                     title="Google Scholar">
                    <i class="fas fa-graduation-cap"></i>
                  </a>
                  <a *ngIf="researcher.linkedin"
                     [href]="researcher.linkedin"
                     target="_blank"
                     class="p-2 text-navy-400 hover:text-blue-600 transition-colors"
                     title="LinkedIn">
                    <i class="fab fa-linkedin-in"></i>
                  </a>
                  <a *ngIf="researcher.twitter"
                     [href]="researcher.twitter"
                     target="_blank"
                     class="p-2 text-navy-400 hover:text-sky-500 transition-colors"
                     title="Twitter/X">
                    <i class="fab fa-twitter"></i>
                  </a>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

  </div>
</div>
